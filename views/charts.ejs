<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charts Display</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" text="text/css" href="/styles/charts.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/styles/home.css">
    <link rel="stylesheet" href="/styles/header-footer.css">
    <link rel="stylesheet" href="/styles/admin-page.css">
    <link rel="stylesheet" href="/styles/charts.css">
</head>
<body>

    <!-- Script to pass filtered customer data to the window object -->
    <script>
        const customers = <%- JSON.stringify(customers) %>;
        const filteredCustomers = customers.map(customer => ({
            gender: customer.gender,
            birthDate: customer.birthDate
        }));
        window.customers = filteredCustomers;
    </script>

    <!-- Navbar -->
    <header class="navbar navbar-expand-lg navbar-light bg-body-tertiary">
        <nav class="container-fluid">
            <!-- Left elements -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <!-- Logo -->
                <a class="navbar-brand mt-2 mt-lg-0" href="#">
                <img src="/images/logo.png" height="50" alt="MDB Logo"/>
                </a>
                <!-- Left links -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/home/nearme">Near Me</a></li>
                    <li class="nav-item"><a class="nav-link" href="/adminPage">Admin Page</a></li>
                </ul>
            </div>
            <!-- Right elements -->
            <div class="d-flex align-items-center position-relative">
                <!-- Cart -->
                <a id="cart-link" class="link-secondary me-3" href="#"><i class="fas fa-shopping-cart fa-2x"></i></a>
                <!-- Avatar -->
                <div class="dropdown">
                    <a class="dropdown-toggle d-flex align-items-center hidden-arrow link-secondary" href="#" id="navbarDropdownMenuAvatar" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-user-circle fa-2x"></i>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuAvatar" style="position: absolute; top: 100%; left: 0;">
                        <li><a class="dropdown-item" href="#">My profile</a></li>
                        <li><a class="dropdown-item" href="#">My orders</a></li>
                        <li><a class="dropdown-item" href="/logout">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="container-flex">
        <aside class="sidebar">
            <ul>
                <li><a href="#" onclick="openTab('workouts')"><i class="fas fa-dumbbell"></i> Workouts</a></li>
                <li><a href="#" onclick="openTab('users')"><i class="fas fa-running"></i> Users</a></li>
                <li><a href="#" onclick="openTab('suppliers')"><i class="fas fa-truck"></i> Suppliers</a></li>
                <li><a href="/adminPage/charts" onclick="openTab('charts')"><i class="fas fa-chart-bar"></i> Statistics</a></li>
                <li><a href="/adminPage/facebook" onclick="openTab('facebook')"><i class="fab fa-facebook fa-2x iconColor"></i> Facebook</a></li>
            </ul>
        </aside>
        <div class="charts">
            <!-- Pie chart -->
            <div class="pie-chart-container">
                <h2>Male Vs. Female Customers Amount</h2>
                <div class="chart-container" id="pie-chart"></div>
                <!-- Legend -->
                <div class="legend">
                    <div class="legend-item">
                        <div class="Female"></div>
                        <span>Female Count</span>
                    </div>
                    <div class="legend-item">
                        <div class="Male"></div>
                        <span>Male Count</span>
                    </div>
                </div>
            </div>

            <!-- Bar chart -->
            <div class="bar-chart-container">
                <h2>Customer Age Distribution</h2>
                <div class="chart-container" id="bar-chart-container"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-white text-center text-lg-start">
        <!-- Info -->
        <div id="first-footer" class="container p-4">
           <div class="row">
              <div class="col-lg-6 col-md-12 mb-4 mb-md-0">
                 <h5 class="text-uppercase">Talk To Us</h5>
                 <p>
                    Got questions or need support? We're here to help! Reach out to us anytime at
                    https://github.com/yuval-benjamin/AppApp . Your fitness journey is our
                    priority, and we’re committed to providing you with the best service possible.
                 </p>
              </div>
              <div class="col-lg-6 col-md-12 mb-4 mb-md-0">
                 <h5 class="text-uppercase">About Us</h5>
                 <p>
                    At AppApp, we're passionate about fitness and wellness. Our mission is to provide
                    you with the best workout routines, designed to fit your unique lifestyle and
                    fitness goals. Join our community and transform your health, one workout at a time.
                 </p>
              </div>
           </div>
        </div>
        <!-- Copyright -->
        <div id="second-footer" class="text-center p-3">
           © 2024 Copyright: Yuval Benjamin, Gili Yaacobi, Maayan Meir and Gal Shirizli
        </div>
     </footer>

    <!-- Javascript files for the charts -->
    <script src="/js/pieChart.js"></script>
    <script src="/js/barChart.js"></script>
    <script src="/js/navbar.js"></script>

</body>
</html>
